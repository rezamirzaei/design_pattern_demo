<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/layout :: head('Smart Home ‚Äî Design Patterns Lab')}"></head>
<body>
    <nav th:replace="~{fragments/layout :: navbar('patterns')}"></nav>
    <div th:replace="~{fragments/layout :: toasts}"></div>

    <main class="container" role="main">
        <header>
            <h1>üìê Design Patterns Lab</h1>
            <p class="subtitle">Interactive demonstration of all 23 Gang of Four Design Patterns</p>
        </header>

        <nav class="pattern-nav" aria-label="Pattern selector">
            <span class="nav-section">üî® Creational:</span>
            <button class="nav-tab active" data-pattern="singleton">Singleton</button>
            <button class="nav-tab" data-pattern="factory">Factory</button>
            <button class="nav-tab" data-pattern="abstract-factory">Abstract Factory</button>
            <button class="nav-tab" data-pattern="builder">Builder</button>
            <button class="nav-tab" data-pattern="prototype">Prototype</button>
            <span class="nav-section">üèóÔ∏è Structural:</span>
            <button class="nav-tab" data-pattern="adapter">Adapter</button>
            <button class="nav-tab" data-pattern="bridge">Bridge</button>
            <button class="nav-tab" data-pattern="composite">Composite</button>
            <button class="nav-tab" data-pattern="decorator">Decorator</button>
            <button class="nav-tab" data-pattern="facade">Facade</button>
            <button class="nav-tab" data-pattern="flyweight">Flyweight</button>
            <button class="nav-tab" data-pattern="proxy">Proxy</button>
            <span class="nav-section">üé≠ Behavioral:</span>
            <button class="nav-tab" data-pattern="chain">Chain</button>
            <button class="nav-tab" data-pattern="command">Command</button>
            <button class="nav-tab" data-pattern="interpreter">Interpreter</button>
            <button class="nav-tab" data-pattern="iterator">Iterator</button>
            <button class="nav-tab" data-pattern="mediator">Mediator</button>
            <button class="nav-tab" data-pattern="memento">Memento</button>
            <button class="nav-tab" data-pattern="observer">Observer</button>
            <button class="nav-tab" data-pattern="state">State</button>
            <button class="nav-tab" data-pattern="strategy">Strategy</button>
            <button class="nav-tab" data-pattern="template">Template</button>
            <button class="nav-tab" data-pattern="visitor">Visitor</button>
        </nav>

        <div id="pattern-content">
            <th:block th:insert="~{patterns/singleton :: content}"></th:block>
            <th:block th:insert="~{patterns/factory :: content}"></th:block>
            <th:block th:insert="~{patterns/abstract-factory :: content}"></th:block>
            <th:block th:insert="~{patterns/builder :: content}"></th:block>
            <th:block th:insert="~{patterns/prototype :: content}"></th:block>
            <th:block th:insert="~{patterns/adapter :: content}"></th:block>
            <th:block th:insert="~{patterns/bridge :: content}"></th:block>
            <th:block th:insert="~{patterns/composite :: content}"></th:block>
            <th:block th:insert="~{patterns/decorator :: content}"></th:block>
            <th:block th:insert="~{patterns/facade :: content}"></th:block>
            <th:block th:insert="~{patterns/flyweight :: content}"></th:block>
            <th:block th:insert="~{patterns/proxy :: content}"></th:block>
            <th:block th:insert="~{patterns/chain :: content}"></th:block>
            <th:block th:insert="~{patterns/command :: content}"></th:block>
            <th:block th:insert="~{patterns/interpreter :: content}"></th:block>
            <th:block th:insert="~{patterns/iterator :: content}"></th:block>
            <th:block th:insert="~{patterns/mediator :: content}"></th:block>
            <th:block th:insert="~{patterns/memento :: content}"></th:block>
            <th:block th:insert="~{patterns/observer :: content}"></th:block>
            <th:block th:insert="~{patterns/state :: content}"></th:block>
            <th:block th:insert="~{patterns/strategy :: content}"></th:block>
            <th:block th:insert="~{patterns/template :: content}"></th:block>
            <th:block th:insert="~{patterns/visitor :: content}"></th:block>
        </div>
    </main>

    <script>
        var PatternDemo = {
            toast: function(msg, type) {
                type = type || 'info';
                var c = document.getElementById('toastContainer');
                if (!c) return;
                var t = document.createElement('div');
                t.className = 'toast ' + type;
                t.textContent = msg;
                c.appendChild(t);
                setTimeout(function() { t.remove(); }, 3000);
            },
            showResult: function(id, text) {
                var el = document.getElementById(id);
                if (el) { el.textContent = text; el.classList.add('show'); }
            }
        };
        document.querySelectorAll('.nav-tab').forEach(function(tab) {
            tab.addEventListener('click', function() {
                var pattern = this.dataset.pattern;
                document.querySelectorAll('.nav-tab').forEach(function(t) { t.classList.remove('active'); });
                this.classList.add('active');
                document.querySelectorAll('.pattern-card').forEach(function(c) { c.classList.remove('active'); });
                var target = document.getElementById('pattern-' + pattern);
                if (target) target.classList.add('active');
            });
        });
    </script>
    <div th:replace="~{fragments/layout :: scripts}"></div>
    <script th:src="@{/js/patterns.js}"></script>
    <footer th:replace="~{fragments/layout :: footer}"></footer>
</body>
</html>
